{
  "version": 3,
  "sources": ["../../src/lib/updateDeviceId.ts"],
  "sourcesContent": ["import axios from \"axios\";\nimport { MidasAquatemp } from \"../main\";\nimport { saveValue } from \"./saveValue\";\nimport { initStore } from \"./store\";\nimport { updateDeviceStatus } from \"./updateDeviceStatus\";\n\nlet _this: MidasAquatemp;\n\nexport async function updateDeviceID(): Promise<void> {\n\tconst store = initStore();\n\tif (!_this) {\n\t\t_this = MidasAquatemp.getInstance();\n\t}\n\tconst { token, apiLevel, cloudURL } = store;\n\n\tif (token) {\n\t\t_this.log.info(\"Token: \" + token);\n\t\tlet sURL;\n\t\tif (apiLevel < 3) {\n\t\t\tsURL = cloudURL + \"/app/device/deviceList.json\";\n\t\t} else {\n\t\t\tsURL = cloudURL + \"/app/device/deviceList\";\n\t\t}\n\t\tconst response = await axios.post(\n\t\t\tsURL,\n\t\t\t{\n\t\t\t\tproductIds: [\n\t\t\t\t\t\"1132174963097280512\",\n\t\t\t\t\t\"1245226668902080512\",\n\t\t\t\t\t\"1656269521923575808\",\n\t\t\t\t\t\"1663080854333558784\",\n\t\t\t\t\t\"1596427678569979904\",\n\t\t\t\t\t\"1674238226096406528\",\n\t\t\t\t\t\"1650063968998252544\",\n\t\t\t\t\t\"1668781858447085568\",\n\t\t\t\t\t\"1186904563333062656\",\n\t\t\t\t\t\"1158905952238313472\",\n\t\t\t\t\t\"1442284873216843776\",\n\t\t\t\t\t\"1732565142225256450\",\n\t\t\t\t\t\"1548963836789501952\",\n\t\t\t\t\t\"1669159229372477440\",\n\t\t\t\t\t\"1650758828508766208\",\n\t\t\t\t\t\"1664085465655808000\",\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\theaders: { \"x-token\": token },\n\t\t\t},\n\t\t);\n\n\t\tif (response && response.status == 200) {\n\t\t\t// printLog(\"DeviceList: \" + JSON.stringify(response.data));\n\t\t\tif (response.data.error_code == 0) {\n\t\t\t\tif (apiLevel < 3) {\n\t\t\t\t\tstore.device = response.data.object_result[0].device_code;\n\t\t\t\t\tstore.product = response.data.object_result[0].product_id;\n\t\t\t\t\tstore.reachable = response.data.object_result[0].device_status == \"ONLINE\";\n\t\t\t\t} else {\n\t\t\t\t\tstore.device = response.data.objectResult[0].deviceCode;\n\t\t\t\t\tstore.product = response.data.objectResult[0].productId;\n\t\t\t\t\tstore.reachable = response.data.objectResult[0].deviceStatus == \"ONLINE\";\n\t\t\t\t}\n\n\t\t\t\t// printLog(\"DeviceCode: \" + device + \", ProductID: \" + product + \", DeviceStatus: \" + reachable);\n\t\t\t\tsaveValue(\"DeviceCode\", store.device, \"string\");\n\t\t\t\tsaveValue(\"ProductCode\", store.product, \"string\");\n\n\t\t\t\tif (store.reachable && store.device) {\n\t\t\t\t\tsaveValue(\"info.connection\", true, \"boolean\");\n\t\t\t\t\tif (store.device != \"\" && store.product) {\n\t\t\t\t\t\tawait updateDeviceStatus();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// offline\n\t\t\t\t\tstore.device = \"\";\n\t\t\t\t\tsaveValue(\"info.connection\", false, \"boolean\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Login-Fehler\n\t\t\t\t// log(\"Fehler in updateDeviceID(): \" + JSON.stringify(response.data), \"error\");\n\n\t\t\t\tsaveValue(\"info.connection\", false, \"boolean\");\n\n\t\t\t\t(store.token = \"\"), (store.device = \"\"), (store.reachable = false);\n\t\t\t}\n\t\t}\n\t\t// Login-Fehler\n\t\t// log(\"Fehler in updateDeviceID(): \" + JSON.stringify(response.data), \"error\");\n\n\t\tsaveValue(\"info.connection\", false, \"boolean\");\n\t}\n\t(store.token = \"\"), (store.device = \"\"), (store.reachable = false);\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAClB,kBAA8B;AAC9B,uBAA0B;AAC1B,mBAA0B;AAC1B,gCAAmC;AAEnC,IAAI;AAEJ,eAAsB,iBAAgC;AACrD,QAAM,YAAQ,wBAAU;AACxB,MAAI,CAAC,OAAO;AACX,YAAQ,0BAAc,YAAY;AAAA,EACnC;AACA,QAAM,EAAE,OAAO,UAAU,SAAS,IAAI;AAEtC,MAAI,OAAO;AACV,UAAM,IAAI,KAAK,YAAY,KAAK;AAChC,QAAI;AACJ,QAAI,WAAW,GAAG;AACjB,aAAO,WAAW;AAAA,IACnB,OAAO;AACN,aAAO,WAAW;AAAA,IACnB;AACA,UAAM,WAAW,MAAM,aAAAA,QAAM;AAAA,MAC5B;AAAA,MACA;AAAA,QACC,YAAY;AAAA,UACX;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,MACA;AAAA,QACC,SAAS,EAAE,WAAW,MAAM;AAAA,MAC7B;AAAA,IACD;AAEA,QAAI,YAAY,SAAS,UAAU,KAAK;AAEvC,UAAI,SAAS,KAAK,cAAc,GAAG;AAClC,YAAI,WAAW,GAAG;AACjB,gBAAM,SAAS,SAAS,KAAK,cAAc,CAAC,EAAE;AAC9C,gBAAM,UAAU,SAAS,KAAK,cAAc,CAAC,EAAE;AAC/C,gBAAM,YAAY,SAAS,KAAK,cAAc,CAAC,EAAE,iBAAiB;AAAA,QACnE,OAAO;AACN,gBAAM,SAAS,SAAS,KAAK,aAAa,CAAC,EAAE;AAC7C,gBAAM,UAAU,SAAS,KAAK,aAAa,CAAC,EAAE;AAC9C,gBAAM,YAAY,SAAS,KAAK,aAAa,CAAC,EAAE,gBAAgB;AAAA,QACjE;AAGA,wCAAU,cAAc,MAAM,QAAQ,QAAQ;AAC9C,wCAAU,eAAe,MAAM,SAAS,QAAQ;AAEhD,YAAI,MAAM,aAAa,MAAM,QAAQ;AACpC,0CAAU,mBAAmB,MAAM,SAAS;AAC5C,cAAI,MAAM,UAAU,MAAM,MAAM,SAAS;AACxC,sBAAM,8CAAmB;AAAA,UAC1B;AAAA,QACD,OAAO;AAEN,gBAAM,SAAS;AACf,0CAAU,mBAAmB,OAAO,SAAS;AAAA,QAC9C;AAAA,MACD,OAAO;AAIN,wCAAU,mBAAmB,OAAO,SAAS;AAE7C,QAAC,MAAM,QAAQ,IAAM,MAAM,SAAS,IAAM,MAAM,YAAY;AAAA,MAC7D;AAAA,IACD;AAIA,oCAAU,mBAAmB,OAAO,SAAS;AAAA,EAC9C;AACA,EAAC,MAAM,QAAQ,IAAM,MAAM,SAAS,IAAM,MAAM,YAAY;AAC7D;",
  "names": ["axios"]
}
