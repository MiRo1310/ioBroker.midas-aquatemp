{
  "version": 3,
  "sources": ["../../src/lib/updateDeviceOnError.ts"],
  "sourcesContent": ["import axios from 'axios';\r\nimport { saveValue } from './saveValue';\r\nimport { initStore } from './store';\r\nimport { errorLogger } from './logging';\r\n\r\nexport async function updateDeviceErrorMsg(): Promise<void> {\r\n    const store = initStore();\r\n    try {\r\n        const { token, apiLevel, cloudURL, device: deviceCode } = store;\r\n        if (token) {\r\n            const sURL =\r\n                apiLevel < 3\r\n                    ? `${cloudURL}/app/device/getFaultDataByDeviceCode.json`\r\n                    : `${cloudURL}/app/device/getFaultDataByDeviceCode`;\r\n\r\n            const response = await axios.post(\r\n                sURL,\r\n                {\r\n                    device_code: deviceCode,\r\n                    deviceCode: deviceCode,\r\n                },\r\n                {\r\n                    headers: { 'x-token': token },\r\n                },\r\n            );\r\n\r\n            if (parseInt(response.data.error_code) == 0) {\r\n                await saveValue('error', true, 'boolean');\r\n\r\n                if (apiLevel < 3) {\r\n                    await saveValue('errorMessage', response.data.object_result[0]?.description ?? '', 'string');\r\n                    await saveValue('errorCode', response.data.object_result[0]?.fault_code, 'string');\r\n                    await saveValue('errorLevel', response.data.object_result[0]?.error_level, 'string');\r\n                    return;\r\n                }\r\n                await saveValue('errorMessage', response.data.objectResult[0]?.description ?? '', 'string');\r\n                await saveValue('errorCode', response.data.objectResult[0]?.fault_code, 'string');\r\n                await saveValue('errorLevel', response.data.objectResult[0]?.error_level, 'string');\r\n                return;\r\n            }\r\n            // Login-Fehler\r\n            store.resetOnErrorHandler();\r\n            return;\r\n        }\r\n        return;\r\n    } catch (error: any) {\r\n        errorLogger('Error in updateDeviceErrorMsg', error, store._this);\r\n    }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAClB,uBAA0B;AAC1B,mBAA0B;AAC1B,qBAA4B;AAE5B,eAAsB,uBAAsC;AAL5D;AAMI,QAAM,YAAQ,wBAAU;AACxB,MAAI;AACA,UAAM,EAAE,OAAO,UAAU,UAAU,QAAQ,WAAW,IAAI;AAC1D,QAAI,OAAO;AACP,YAAM,OACF,WAAW,IACL,GAAG,QAAQ,8CACX,GAAG,QAAQ;AAErB,YAAM,WAAW,MAAM,aAAAA,QAAM;AAAA,QACzB;AAAA,QACA;AAAA,UACI,aAAa;AAAA,UACb;AAAA,QACJ;AAAA,QACA;AAAA,UACI,SAAS,EAAE,WAAW,MAAM;AAAA,QAChC;AAAA,MACJ;AAEA,UAAI,SAAS,SAAS,KAAK,UAAU,KAAK,GAAG;AACzC,kBAAM,4BAAU,SAAS,MAAM,SAAS;AAExC,YAAI,WAAW,GAAG;AACd,oBAAM,4BAAU,iBAAgB,oBAAS,KAAK,cAAc,CAAC,MAA7B,mBAAgC,gBAAhC,YAA+C,IAAI,QAAQ;AAC3F,oBAAM,4BAAU,cAAa,cAAS,KAAK,cAAc,CAAC,MAA7B,mBAAgC,YAAY,QAAQ;AACjF,oBAAM,4BAAU,eAAc,cAAS,KAAK,cAAc,CAAC,MAA7B,mBAAgC,aAAa,QAAQ;AACnF;AAAA,QACJ;AACA,kBAAM,4BAAU,iBAAgB,oBAAS,KAAK,aAAa,CAAC,MAA5B,mBAA+B,gBAA/B,YAA8C,IAAI,QAAQ;AAC1F,kBAAM,4BAAU,cAAa,cAAS,KAAK,aAAa,CAAC,MAA5B,mBAA+B,YAAY,QAAQ;AAChF,kBAAM,4BAAU,eAAc,cAAS,KAAK,aAAa,CAAC,MAA5B,mBAA+B,aAAa,QAAQ;AAClF;AAAA,MACJ;AAEA,YAAM,oBAAoB;AAC1B;AAAA,IACJ;AACA;AAAA,EACJ,SAAS,OAAY;AACjB,oCAAY,iCAAiC,OAAO,MAAM,KAAK;AAAA,EACnE;AACJ;",
  "names": ["axios"]
}
